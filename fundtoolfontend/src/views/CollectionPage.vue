<template>
  <n-space vertical size="large">
    <n-layout>
        <n-layout-header>
            <n-grid cols="4" item-responsive responsive="screen">
                <n-gi span="0 m:0 l:1">
                    <div class="light-green"></div>
                </n-gi>
                <n-gi span="4 m:4 l:2">
                    <div class="green">
                        <n-input-group>
                            <n-input :style="{ width: '50%' }" v-model="searchRef"/>
                            <n-button type="primary" ghost>搜索</n-button>
                        </n-input-group>
                    </div>
                </n-gi>
                <n-gi span="0 m:0 l:1">
                    <div class="light-green"></div>
                </n-gi>
            </n-grid>
        </n-layout-header>
        <n-layout-content content-style="padding: 24px;">
            <n-grid cols="4" item-responsive responsive="screen">
                <n-gi span="0 m:0 l:1">
                    <div class="light-green"></div>
                </n-gi>
                <n-gi span="4 m:4 l:2">
                    <div class="white" style="height:500px">
                        <!-- <canvas id="myChart" width="350" height="260"></canvas> -->
                        <div id="main" style="width: 1000px;height:500px;"></div>
                    </div>
                </n-gi>
                <n-gi span="0 m:0 l:1">
                    <div class="light-green"></div>
                </n-gi>
            </n-grid>
        </n-layout-content>
    </n-layout>
  </n-space>
</template>

<script>
import { ref } from "@vue/runtime-core"
import { nextTick } from 'vue'
import * as echarts from 'echarts';
export default {
    setup(){
        const searchRef = ref(null);
        // const {proxy} = getCurrentInstance();
        const data = [["date","value","growth"],["2021-01-04","1.133","6.79",""],["2021-01-05","1.14","0.62",""],["2021-01-06","1.124","-1.4",""],["2021-01-07","1.153","2.58",""],["2021-01-08","1.143","-0.87",""],["2021-01-11","1.104","-3.41",""],["2021-01-12","1.128","2.17",""],["2021-01-13","1.095","-2.93",""],["2021-01-14","1.067","-2.56",""],["2021-01-15","1.091","2.25",""],["2021-01-18","1.098","0.64",""],["2021-01-19","1.07","-2.55",""],["2021-01-20","1.116","4.3",""],["2021-01-21","1.139","2.06",""],["2021-01-22","1.168","2.55",""],["2021-01-25","1.165","-0.26",""],["2021-01-26","1.133","-2.75",""],["2021-01-27","1.139","0.53",""],["2021-01-28","1.097","-3.69",""],["2021-01-29","1.077","-1.82",""],["2021-02-01","1.078","0.09",""],["2021-02-02","1.122","4.08",""],["2021-02-03","1.119","-0.27",""],["2021-02-04","1.094","-2.23",""],["2021-02-05","1.064","-2.74",""],["2021-02-08","1.082","1.69",""],["2021-02-09","1.114","2.96",""],["2021-02-10","1.127","1.17",""],["2021-02-18","1.103","-2.13",""],["2021-02-19","1.087","-1.45",""],["2021-02-22","1.069","-1.66",""],["2021-02-23","1.05","-1.78",""],["2021-02-24","1.013","-3.52",""],["2021-02-25","0.995","-1.78",""],["2021-02-26","0.974","-2.11",""],["2021-03-01","1.012","3.9",""],["2021-03-02","1.016","0.4",""],["2021-03-03","1.024","0.79",""],["2021-03-04","0.974","-4.88",""],["2021-03-05","0.981","0.72",""],["2021-03-08","0.935","-4.69",""],["2021-03-09","0.92","-1.6",""],["2021-03-10","0.936","1.74",""],["2021-03-11","0.962","2.78",""],["2021-03-12","0.969","0.73",""],["2021-03-15","0.944","-2.58",""],["2021-03-16","0.945","0.11",""],["2021-03-17","0.968","2.43",""],["2021-03-18","0.969","0.1",""],["2021-03-19","0.939","-3.1",""],["2021-03-22","0.951","1.28",""],["2021-03-23","0.92","-3.26",""],["2021-03-24","0.895","-2.72",""],["2021-03-25","0.91","1.68",""],["2021-03-26","0.948","4.18",""],["2021-03-29","0.936","-1.27",""],["2021-03-30","0.947","1.18",""],["2021-03-31","0.935","-1.27",""],["2021-04-01","0.953","1.93",""],["2021-04-02","0.965","1.26",""],["2021-04-06","0.97","0.52",""],["2021-04-07","0.964","-0.62",""],["2021-04-08","0.959","-0.52",""],["2021-04-09","0.945","-1.46",""],["2021-04-12","0.916","-3.07",""],["2021-04-13","0.92","0.44",""],["2021-04-14","0.959","4.24",""],["2021-04-15","0.959","0.0",""],["2021-04-16","0.958","-0.1",""],["2021-04-19","1.014","5.85",""],["2021-04-20","1.009","-0.49",""],["2021-04-21","1.009","0.0",""],["2021-04-22","1.011","0.2",""],["2021-04-23","1.023","1.19",""],["2021-04-26","1.013","-0.98",""],["2021-04-27","1.003","-0.99",""],["2021-04-28","1.027","2.39",""],["2021-04-29","1.024","-0.29",""],["2021-04-30","1.044","1.95",""],["2021-05-06","1.036","-0.77",""],["2021-05-07","1.008","-2.7",""],["2021-05-10","1.013","0.5",""],["2021-05-11","0.996","-1.68",""],["2021-05-12","1.0","0.4",""],["2021-05-13","0.98","-2.0",""],["2021-05-14","1.01","3.06",""],["2021-05-17","1.053","4.26",""],["2021-05-18","1.054","0.09",""],["2021-05-19","1.089","3.32",""],["2021-05-20","1.095","0.55",""],["2021-05-21","1.09","-0.46",""],["2021-05-24","1.091","0.09",""],["2021-05-25","1.101","0.92",""],["2021-05-26","1.095","-0.54",""],["2021-05-27","1.1","0.46",""],["2021-05-28","1.145","4.09",""],["2021-05-31","1.199","4.72",""],["2021-06-01","1.185","-1.17",""],["2021-06-02","1.179","-0.51",""],["2021-06-03","1.174","-0.42",""],["2021-06-04","1.203","2.47",""],["2021-06-07","1.181","-1.83",""],["2021-06-08","1.173","-0.68",""],["2021-06-09","1.171","-0.17",""],["2021-06-10","1.211","3.42",""],["2021-06-11","1.223","0.99",""],["2021-06-15","1.214","-0.74",""],["2021-06-16","1.142","-5.93",""],["2021-06-17","1.173","2.71",""],["2021-06-18","1.223","4.26",""],["2021-06-21","1.228","0.41",""],["2021-06-22","1.232","0.33",""],["2021-06-23","1.263","2.52",""],["2021-06-24","1.247","-1.27",""],["2021-06-25","1.266","1.52",""],["2021-06-28","1.297","2.45",""],["2021-06-29","1.301","0.31",""],["2021-06-30","1.331","2.31",""],["2021-07-01","1.317","-1.05",""],["2021-07-02","1.311","-0.46",""],["2021-07-05","1.341","2.29",""],["2021-07-06","1.341","0.0",""],["2021-07-07","1.414","5.44",""],["2021-07-08","1.435","1.49",""],["2021-07-09","1.456","1.46",""],["2021-07-12","1.531","5.15",""],["2021-07-13","1.531","0.0",""],["2021-07-14","1.467","-4.18",""],["2021-07-15","1.495","1.91",""],["2021-07-16","1.428","-4.48",""],["2021-07-19","1.409","-1.33",""],["2021-07-20","1.437","1.99",""],["2021-07-21","1.507","4.87",""],["2021-07-22","1.518","0.73",""],["2021-07-23","1.508","-0.66",""],["2021-07-26","1.482","-1.72",""],["2021-07-27","1.398","-5.67",""],["2021-07-28","1.411","0.93",""],["2021-07-29","1.486","5.32",""],["2021-07-30","1.479","-0.47",""],["2021-08-02","1.521","2.84",""],["2021-08-03","1.473","-3.16",""],["2021-08-04","1.586","7.67",""],["2021-08-05","1.57","-1.01",""],["2021-08-06","1.597","1.72",""],["2021-08-09","1.548","-3.07",""],["2021-08-10","1.519","-1.87",""],["2021-08-11","1.545","1.71",""],["2021-08-12","1.546","0.06",""],["2021-08-13","1.534","-0.78",""],["2021-08-16","1.461","-4.76",""],["2021-08-17","1.439","-1.51",""],["2021-08-18","1.448","0.63",""],["2021-08-19","1.497","3.38",""],["2021-08-20","1.484","-0.87",""],["2021-08-23","1.52","2.43",""],["2021-08-24","1.559","2.57",""],["2021-08-25","1.557","-0.13",""],["2021-08-26","1.527","-1.93",""],["2021-08-27","1.552","1.64",""],["2021-08-30","1.566","0.9",""],["2021-08-31","1.548","-1.15",""],["2021-09-01","1.49","-3.75",""],["2021-09-02","1.497","0.47",""],["2021-09-03","1.444","-3.54",""],["2021-09-06","1.505","4.22",""],["2021-09-07","1.554","3.26",""],["2021-09-08","1.527","-1.74",""],["2021-09-09","1.541","0.92",""],["2021-09-10","1.549","0.52",""],["2021-09-13","1.537","-0.77",""],["2021-09-14","1.58","2.8",""],["2021-09-15","1.587","0.44",""],["2021-09-16","1.525","-3.91",""],["2021-09-17","1.542","1.11",""],["2021-09-22","1.524","-1.17",""],["2021-09-23","1.519","-0.33",""],["2021-09-24","1.524","0.33",""],["2021-09-27","1.497","-1.77",""],["2021-09-28","1.461","-2.4",""],["2021-09-29","1.426","-2.4",""],["2021-09-30","1.491","4.56",""],["2021-10-08","1.463","-1.88",""],["2021-10-11","1.465","0.14",""],["2021-10-12","1.425","-2.73",""],["2021-10-13","1.478","3.72",""],["2021-10-14","1.484","0.41",""],["2021-10-15","1.528","2.96",""],["2021-10-18","1.564","2.36",""],["2021-10-19","1.567","0.19",""],["2021-10-20","1.591","1.53",""],["2021-10-21","1.579","-0.75",""],["2021-10-22","1.576","-0.19",""],["2021-10-25","1.629","3.36",""],["2021-10-26","1.63","0.06",""],["2021-10-27","1.662","1.96",""],["2021-10-28","1.629","-1.99",""],["2021-10-29","1.644","0.92",""]];
        //const data = [["date","value","growth"],["2021-08-19","1.499","0",""],["2021-08-20","1.486","-0.87",""],["2021-08-23","1.534","3.23",""],["2021-08-24","1.553","1.24",""],["2021-08-25","1.61","3.67",""],["2021-08-26","1.663","3.29",""],["2021-08-27","1.664","0.06",""],["2021-08-30","1.72","3.37",""],["2021-08-31","1.803","4.83",""],["2021-09-01","1.746","-3.16",""],["2021-09-02","1.813","3.84",""],["2021-09-03","1.778","-1.93",""],["2021-09-06","1.809","1.74",""],["2021-09-07","1.885","4.2",""],["2021-09-08","1.942","3.02",""],["2021-09-09","2.044","5.25",""],["2021-09-10","1.972","-3.52",""],["2021-09-13","2.044","3.65",""],["2021-09-14","1.996","-2.35",""],["2021-09-15","2.007","0.55",""],["2021-09-16","2.007","0.0",""],["2021-09-17","1.893","-5.68",""],["2021-09-22","1.993","5.28",""],["2021-09-23","1.959","-1.71",""],["2021-09-24","1.827","-6.74",""],["2021-09-27","1.78","-2.57",""],["2021-09-28","1.85","3.93",""],["2021-09-29","1.755","-5.14",""],["2021-09-30","1.82","3.7",""],["2021-10-08","1.747","-4.01",""],["2021-10-11","1.807","3.43",""],["2021-10-12","1.774","-1.83",""],["2021-10-13","1.684","-5.07",""],["2021-10-14","1.681","-0.18",""],["2021-10-15","1.744","3.75",""],["2021-10-18","1.844","5.73",""],["2021-10-19","1.853","0.49",""],["2021-10-20","1.716","-7.39",""],["2021-10-21","1.77","3.15",""],["2021-10-22","1.676","-5.31",""],["2021-10-25","1.712","2.15",""],["2021-10-26","1.715","0.18",""],["2021-10-27","1.647","-3.97",""],["2021-10-28","1.552","-5.77",""],["2021-10-29","1.542","-0.64",""],["2021-11-01","1.56","1.17",""],["2021-11-02","1.51","-3.21",""],["2021-11-03","1.568","3.84",""],["2021-11-04","1.548","-1.28",""],["2021-11-05","1.484","-4.13",""]];
        //等待dom加载完成再生成F2图
        nextTick(()=>{
            // 基于准备好的dom，初始化echarts实例
            var myChart = echarts.init(document.getElementById('main'));
            // 绘制图表
            myChart.setOption({
            title: {
                left: 'center',
                text: '富国中证新能源汽车指数(LOF)A'
            },
            toolbox: {
                feature: {
                dataZoom: {
                    yAxisIndex: 'none'
                },
                restore: {},
                saveAsImage: {}
                }
            },
            tooltip: {},
            dataset: {
                // 提供一份数据。
                source: data
            },
            dataZoom: [
                {
                type: 'inside',
                start: 0,
                end: 20
                },
                {
                start: 0,
                end: 20
                }
            ],
            xAxis: {
                type: 'time',
                boundaryGap: false
            },
            yAxis: {},
            series: [
                {
                    type: 'line',
                    encode: {
                        // 将 "amount" 列映射到 X 轴。
                        x: 'date',
                        // 将 "product" 列映射到 Y 轴。
                        y: 'growth',
                        tooltip: ['value', 'growth']
                    }
                }
            ]
            });
        });

        return {
            searchRef
        }
    }
}
</script>

<style>
.n-layout-header,
.n-layout-footer {
  background: rgba(128, 128, 128, 0.2);
  padding: 24px;
}

.n-layout-content {
  background: rgba(128, 128, 128, 0.4);
  
}

.light-green {
  height: 108px;
  background-color: rgba(0, 128, 0, 0.12);
}
.green {
  height: 108px;
  background-color: rgba(0, 128, 0, 0.24);
}
.white {
  height: 108px;
  
}
</style>